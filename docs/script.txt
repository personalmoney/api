//// -- LEVEL 1
//// -- Tables and References
///  -- https://dbdiagram.io/d/5e7f772a4495b02c3b88e749

// Creating tables
Table AccoutType as AT {
  Id int [pk, increment] // auto-increment
  Name nvarchar(100) [not null, unique]
  CreatedTime timestamp
  UpdatedTime timestamp
  Status bit
}

Table Account as A{
  Id int [pk,increment]
  Name nvarchar(100) [not null, unique]
  Type int [ref: > AT.Id]
  InitialBalance decimal
  MinimumBalance decimal
  CreditLimit decimal
  PaymentDate date
  InterestRate decimal
  IncludeInBalance bit
  CreatedTime timestamp
  UpdatedTime timestamp
  Status bit
}

Table Category as C{
  Id int [pk, increment]
  Name nvarchar(100) [not null,unique]
  CreatedTime timestamp
  UpdatedTime timestamp
  Status bit
}

Table SubCategory as SC{
  Id int [pk, increment]
  Name nvarchar(100) [not null,unique]
  CategoryId int [ref: > C.Id]
  CreatedTime timestamp
  UpdatedTime timestamp
}

Table Payee as P{
  Id int [pk, increment]
  Name nvarchar(100) [not null,unique]
  CreatedTime timestamp
  UpdatedTime timestamp
}

Table Tag as T{
  Id int [pk, increment]
  Name nvarchar(100) [not null,unique]
  CreatedTime timestamp
  UpdatedTime timestamp
}

Table Transaction as TR{
  Id int [pk, increment]
  AccountId int [ref: > A.Id]
  ToAccountId int [ref: > A.Id]
  SubCategoryId int [ref: > SC.Id]
  PayeeId int [ref: > P.Id]
  Status nvarchar(20) [not null]
  TransactionDate date [not null]
  Amount decimal [not null]
  ToAmount decimal
  Type nvarchar(20) [not null]
  TransactionNumber nvarchar(500)
  Notes nvarchar(2000)
  CreatedTime timestamp
  UpdatedTime timestamp
}

Table SubTransaction as STR{
  Id int [pk, increment]
  TransactionId int [ref: > TR.Id]
  SubCategoryId int [ref: > SC.Id]
  PayeeId int [ref: > P.Id]
  Amount decimal [not null]
}

Table TransactionTag as TG{
  Id int [pk, increment]
  TransactionId int [ref: > TR.Id]
  TagId int [ref: > T.Id]
  CreatedTime timestamp
  UpdatedTime timestamp
}
